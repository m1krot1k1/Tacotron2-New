# üöÄ –ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø SMART TUNER V2
# –£—Å—Ç—Ä–∞–Ω–µ–Ω—ã –≤—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∫–∞—á–µ—Å—Ç–≤–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π 2024-2025

# üß† Adaptive Advisor - –ë–æ–ª–µ–µ —É–º–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
adaptive_advisor:
  enabled: true
  evaluation_window: 30   # –£–º–µ–Ω—å—à–µ–Ω–æ –¥–ª—è –±—ã—Å—Ç—Ä–æ–π —Ä–µ–∞–∫—Ü–∏–∏ –Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã
  min_history_for_decision: 50  # –£–º–µ–Ω—å—à–µ–Ω–æ –¥–ª—è —Ä–∞–Ω–Ω–µ–≥–æ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞
  min_reward_threshold: -0.03   # –ë–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∏–π –ø–æ—Ä–æ–≥ –∫–∞—á–µ—Å—Ç–≤–∞
  
  # –ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º
  diagnostics:
    instability:
      grad_norm_threshold: 50.0   # –ù–∞–º–Ω–æ–≥–æ —Å—Ç—Ä–æ–∂–µ –¥–ª—è TTS
    overfitting:
      threshold: 2.0      # –°—Ç—Ä–æ–∂–µ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è
      window_size: 20     # –ë—ã—Å—Ç—Ä–∞—è —Ä–µ–∞–∫—Ü–∏—è
    stagnation:
      min_delta: 0.002    # –£–≤–µ–ª–∏—á–µ–Ω–æ –¥–ª—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
      window_size: 50     # –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ
    attention_failure:
      min_alignment_score: 0.7    # –í—ã—Å–æ–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ attention
      alignment_window: 30
    gate_collapse:
      min_gate_accuracy: 0.75     # –í—ã—Å–æ–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ gate
      gate_window: 20

  # –£–ª—É—á—à–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
  default_actions:
    instability:
      name: stability_boost
      params:
        learning_rate_multiplier: 0.5  # –ë–æ–ª–µ–µ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ
        gradient_clipping: 2.0         # –°—Ç—Ä–æ–∂–µ –¥–ª—è TTS
        batch_size_adjust: 0.8
    overfitting:
      name: regularization_boost
      params:
        dropout_increase: 0.02         # –ú—è–≥–∫–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ
        weight_decay_increase: 0.05
    attention_failure:
      name: attention_recovery
      params:
        guided_attention_boost: 2.0    # –£—Å–∏–ª–µ–Ω–∏–µ guided attention
        attention_dropout_reduction: 0.03
    gate_collapse:
      name: gate_recovery
      params:
        gate_loss_weight: 2.0          # –£—Å–∏–ª–µ–Ω–∏–µ gate loss
        gate_threshold_adjust: -0.1

# üìä –ö–†–ò–¢–ò–ß–ï–°–ö–ò –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ï –ø–æ—Ä–æ–≥–∏ –∫–∞—á–µ—Å—Ç–≤–∞ TTS
training_safety:
  enabled: true
  max_training_hours: 12.0   # –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
  min_training_hours: 1.0    # –ú–∏–Ω–∏–º—É–º –¥–ª—è –±–∞–∑–æ–≤–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞
  max_validation_loss: 20.0  # –°—Ç—Ä–æ–∂–µ –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–∞
  min_training_steps: 3000   # –ú–∏–Ω–∏–º—É–º –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
  
  # üéØ –†–ï–í–û–õ–Æ–¶–ò–û–ù–ù–´–ï –∫—Ä–∏—Ç–µ—Ä–∏–∏ –∫–∞—á–µ—Å—Ç–≤–∞ TTS (–∏–∑ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π 2025)
  tts_quality_checks:
    min_attention_alignment: 0.4      # —Å–Ω–∏–∂–µ–Ω–æ —Å 0.75 —Å–æ–≥–ª–∞—Å–Ω–æ –Ω–æ–≤—ã–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º
    min_gate_accuracy: 0.6            # —Å–Ω–∏–∂–µ–Ω–æ —Å 0.8 —Å–æ–≥–ª–∞—Å–Ω–æ –Ω–æ–≤—ã–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º
    max_validation_loss: 30.0         # —É–≤–µ–ª–∏—á–µ–Ω–æ —Å 12.0 —Å–æ–≥–ª–∞—Å–Ω–æ –Ω–æ–≤—ã–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º
    mel_quality_threshold: 0.5        # –í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ mel
    min_training_progress: 0.1        # –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å
    
    # –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è quality assurance
    min_validation_steps: 10          # –ë–æ–ª—å—à–µ –ø—Ä–æ–≤–µ—Ä–æ–∫
    min_training_time_minutes: 30     # –ú–∏–Ω–∏–º—É–º –≤—Ä–µ–º–µ–Ω–∏
    required_checks_percentage: 0.95  # 95% –ø—Ä–æ–≤–µ—Ä–æ–∫ –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–π—Ç–∏
    
    # –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ (–≤—Å–µ –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–π—Ç–∏)
    critical_checks:
      - attention_alignment
      - gate_accuracy  
      - validation_loss
      - mel_quality

# üîß –†–ï–í–û–õ–Æ–¶–ò–û–ù–ù–´–ï –≥–∏–ø–µ—Ä–ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–∏–∑ Very Attentive Tacotron 2025)
hyperparameter_search_space:
  batch_size:
    type: int
    min: 24             # –ú–∏–Ω–∏–º—É–º –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ attention
    max: 48             # –ú–∞–∫—Å–∏–º—É–º –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–∞
    default: 32         # –û–ø—Ç–∏–º—É–º –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è
    
  epochs:
    type: int
    min: 500            # –ú–∏–Ω–∏–º—É–º –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ TTS
    max: 2000           # –ú–∞–∫—Å–∏–º—É–º –¥–ª—è fine-tuning —Ñ–∞–∑—ã
    default: 1000       # –û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è fine-tuning
    
  learning_rate:
    type: float
    min: 0.00001        # –ú–∏–Ω–∏–º—É–º –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
    max: 0.0005         # –ú–∞–∫—Å–∏–º—É–º –∏–∑ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π
    default: 0.0001     # –û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è Tacotron2
    log: true
    
  warmup_steps:
    type: int
    min: 1000           # –ë–æ–ª—å—à–µ warmup –¥–ª—è TTS
    max: 5000           # –û–ø—Ç–∏–º—É–º
    default: 2000       # –£–≤–µ–ª–∏—á–µ–Ω–æ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
    
  guided_attention_enabled:
    type: categorical
    choices: [true]     # –í—Å–µ–≥–¥–∞ –≤–∫–ª—é—á–µ–Ω–æ –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–∞
    default: true
    
  guide_loss_weight:
    type: float
    min: 1.0            # –ú–∏–Ω–∏–º—É–º –¥–ª—è —Ä–∞–±–æ—Ç—ã guided attention
    max: 5.0            # –ú–∞–∫—Å–∏–º—É–º
    default: 2.5        # –£–≤–µ–ª–∏—á–µ–Ω–æ –¥–ª—è –ª—É—á—à–µ–≥–æ alignment
    
  p_attention_dropout:
    type: float
    min: 0.0
    max: 0.1            # –ö–†–ò–¢–ò–ß–ï–°–ö–ò —É–º–µ–Ω—å—à–µ–Ω–æ
    default: 0.05       # –û–ø—Ç–∏–º—É–º –¥–ª—è TTS
    
  gate_threshold:
    type: float
    min: 0.4
    max: 0.6
    default: 0.5
    
  dropout_rate:
    type: float
    min: 0.05           # –ú–∏–Ω–∏–º—É–º
    max: 0.15           # –ö–†–ò–¢–ò–ß–ï–°–ö–ò —É–º–µ–Ω—å—à–µ–Ω–æ —Å 0.4
    default: 0.08       # –û–ø—Ç–∏–º—É–º –¥–ª—è TTS –∫–∞—á–µ—Å—Ç–≤–∞
    
  postnet_dropout_rate:
    type: float
    min: 0.0
    max: 0.1            # –£–º–µ–Ω—å—à–µ–Ω–æ
    default: 0.05       # –û–ø—Ç–∏–º—É–º

  use_location_relative_attention:
    type: categorical
    choices: [true, false]
    default: true

# üéØ –†–ï–í–û–õ–Æ–¶–ò–û–ù–ù–ê–Ø –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (–∏–∑ Llasa –∏ Muyan-TTS –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π)
optimization:
  direction: minimize
  n_trials: 25        # –£–≤–µ–ª–∏—á–µ–Ω–æ –¥–ª—è –ª—É—á—à–µ–≥–æ –ø–æ–∏—Å–∫–∞
  objective_metric: composite_tts_score
  continue_training: true
  sampler: bayesian
  
  # –ë–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è
  full_epochs_per_trial: 120    # –£–≤–µ–ª–∏—á–µ–Ω–æ –¥–ª—è –ª—É—á—à–µ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞
  overfitting_penalty: 0.02     # –£–º–µ–Ω—å—à–µ–Ω–æ
  
  # –°—Ç—Ä–æ–≥–∏–µ TTS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π
  tts_specific:
    min_training_steps: 5000           # –£–≤–µ–ª–∏—á–µ–Ω–æ
    attention_convergence_threshold: 0.75  # –°—Ç—Ä–æ–∂–µ
    gate_accuracy_threshold: 0.8       # –°—Ç—Ä–æ–∂–µ
    early_pruning_disabled_epochs: 100 # –ë–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ learning
    
  # –£–õ–£–ß–®–ï–ù–ù–ê–Ø –∫–æ–º–ø–æ–∑–∏—Ç–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ (–∏–∑ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π)
  composite_objective:
    weights:
      validation_loss: 0.4              # –û—Å–Ω–æ–≤–Ω–æ–π –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å
      attention_alignment_score: 0.25   # –í–∞–∂–Ω–æ—Å—Ç—å alignment
      gate_accuracy: 0.2               # –í–∞–∂–Ω–æ—Å—Ç—å gate
      mel_quality_score: 0.15          # –í–∞–∂–Ω–æ—Å—Ç—å mel –∫–∞—á–µ—Å—Ç–≤–∞
    normalize_scores: true
    quality_bonus_threshold: 0.85      # –í—ã—Å–æ–∫–∏–π –ø–æ—Ä–æ–≥ –¥–ª—è –±–æ–Ω—É—Å–∞
    progress_weight: 0.15              # –í–µ—Å –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

# üõë –ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–Ω–Ω–µ–≥–æ –æ—Å—Ç–∞–Ω–æ–≤–∞
early_stopping:
  enabled: true
  
  # –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Å—Ç–∞–Ω–æ–≤–∞ –∏–∑ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π 2025
  patience_epochs: 300       # –ë–æ–ª—å—à–µ —Ç–µ—Ä–ø–µ–Ω–∏—è –¥–ª—è TTS
  min_delta: 0.0005         # –ë–æ–ª–µ–µ —Ç–æ—á–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ —É–ª—É—á—à–µ–Ω–∏—è
  monitor_metric: "val_loss"
  
  # –ê–î–ê–ü–¢–ò–í–ù–´–ï –ø–æ—Ä–æ–≥–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ñ–∞–∑—ã –æ–±—É—á–µ–Ω–∏—è (–∏–∑ Very Attentive Tacotron)
  adaptive_thresholds:
    enabled: true
    
    # –§–∞–∑–∞ –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏—è attention (0-800 —ç–ø–æ—Ö)
    alignment_phase:
      patience: 200           # –ë–æ–ª—å—à–µ —Ç–µ—Ä–ø–µ–Ω–∏—è –¥–ª—è alignment
      min_improvement: 0.02   # –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ —É–ª—É—á—à–µ–Ω–∏—è
      attention_threshold: 0.6
      
    # –§–∞–∑–∞ –æ–±—É—á–µ–Ω–∏—è (800-3000 —ç–ø–æ—Ö)  
    learning_phase:
      patience: 250           # –ï—â–µ –±–æ–ª—å—à–µ —Ç–µ—Ä–ø–µ–Ω–∏—è
      min_improvement: 0.001  # –¢–æ—á–Ω–∞—è –æ—Ü–µ–Ω–∫–∞
      attention_threshold: 0.85
      
    # –§–∞–∑–∞ fine-tuning (3000+ —ç–ø–æ—Ö)
    fine_tuning_phase:
      patience: 400           # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —Ç–µ—Ä–ø–µ–Ω–∏–µ
      min_improvement: 0.0005
      attention_threshold: 0.9

# üöÄ –ù–û–í–ê–Ø —Å–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç—Ä–æ–ª—è –∫–∞—á–µ—Å—Ç–≤–∞ –æ–±—É—á–µ–Ω–∏—è
quality_monitoring:
  enabled: true
  
  # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞–∂–¥—ã–µ N —ç–ø–æ—Ö
  check_interval: 10
  
  # –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –∏–∑ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π 2025
  quality_metrics:
    attention_diagonality:
      enabled: true
      min_threshold: 0.7      # –í—ã—Å–æ–∫–æ–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ
      target_threshold: 0.9   # –¶–µ–ª—å –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–∞
    
    gate_quality:
      enabled: true
      min_accuracy: 0.75      # –í—ã—Å–æ–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
      max_premature_stop: 0.1 # –ö–æ–Ω—Ç—Ä–æ–ª—å –ø—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –æ—Å—Ç–∞–Ω–æ–≤–∞
    
    mel_spectrogram_quality:
      enabled: true
      min_clarity: 0.6        # –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —á–µ—Ç–∫–æ—Å—Ç—å
      max_noise_level: 0.2    # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —à—É–º
    
    training_stability:
      enabled: true
      max_gradient_norm: 10.0 # –°—Ç–∞–±–∏–ª—å–Ω—ã–µ –≥—Ä–∞–¥–∏–µ–Ω—Ç—ã
      loss_smoothness: 0.8    # –ü–ª–∞–≤–Ω–æ—Å—Ç—å –æ–±—É—á–µ–Ω–∏—è

# üîÑ –ê–î–ê–ü–¢–ò–í–ù–ê–Ø —Å–∏—Å—Ç–µ–º–∞ guided attention (–∏–∑ MonoAlign –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π)
guided_attention:
  enabled: true
  
  # –£–ª—É—á—à–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π
  initial_guide_decay: 0.9995    # –ú–µ–¥–ª–µ–Ω–Ω–µ–µ decay
  final_guide_decay: 0.99999     # –§–∏–Ω–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
  guide_decay_start: 2000        # –ü–æ–∑–∂–µ –Ω–∞—á–∏–Ω–∞—Ç—å decay
  
  # Adaptive guided attention
  adaptive_weight:
    enabled: true
    initial_weight: 5.0          # –°–∏–ª—å–Ω–æ–µ –Ω–∞—á–∞–ª—å–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ
    final_weight: 1.0            # –§–∏–Ω–∞–ª—å–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ
    decay_steps: 5000            # –ú–µ–¥–ª–µ–Ω–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥
  
  # Sigma scheduling –¥–ª—è –ª—É—á—à–µ–≥–æ alignment
  sigma_schedule:
    enabled: true
    initial_sigma: 0.4           # –®–∏—Ä–æ–∫–æ–µ –Ω–∞—á–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
    final_sigma: 0.2             # –£–∑–∫–æ–µ —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
    decay_rate: 0.9999           # –ú–µ–¥–ª–µ–Ω–Ω–æ–µ —Å—É–∂–µ–Ω–∏–µ

# üìà –ò–ù–¢–ï–õ–õ–ï–ö–¢–£–ê–õ–¨–ù–ê–Ø –∞–¥–∞–ø—Ç–∞—Ü–∏—è —ç–ø–æ—Ö (–∏–∑ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π XTTS)
adaptive_learning:
  enabled: true
  
  # –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —ç–ø–æ—Ö
  dataset_analysis:
    enabled: true
    factors:
      - dataset_size
      - voice_complexity  
      - quality_metrics
      - hardware_constraints
  
  # –≠–ø–æ—Ö–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–∞–∑–º–µ—Ä–∞ –¥–∞—Ç–∞—Å–µ—Ç–∞
  epoch_recommendations:
    very_small: 5000     # <30 –º–∏–Ω –∞—É–¥–∏–æ
    small: 4000          # 30–º–∏–Ω - 1—á–∞—Å
    medium: 3000         # 1-3 —á–∞—Å–∞
    large: 2500          # 3-10 —á–∞—Å–æ–≤
    very_large: 2000     # >10 —á–∞—Å–æ–≤
  
  # –ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
  complexity_modifiers:
    simple: 0.8          # –ü—Ä–æ—Å—Ç—ã–µ –≥–æ–ª–æ—Å–∞
    moderate: 1.0        # –û–±—ã—á–Ω—ã–µ –≥–æ–ª–æ—Å–∞
    complex: 1.3         # –°–ª–æ–∂–Ω—ã–µ –≥–æ–ª–æ—Å–∞ (–∞–∫—Ü–µ–Ω—Ç—ã)
    very_complex: 1.6    # –û—á–µ–Ω—å —Å–ª–æ–∂–Ω—ã–µ (—ç–º–æ—Ü–∏–∏, —Å—Ç–∏–ª–∏)

# üîß –°–ò–°–¢–ï–ú–ê –û–ë–ù–ê–†–£–ñ–ï–ù–ò–Ø –ü–ï–†–ï–û–ë–£–ß–ï–ù–ò–Ø (–∏–∑ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π)
overfitting_detection:
  enabled: true
  
  # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞–∂–¥—ã–µ N —ç–ø–æ—Ö
  check_interval: 20
  
  # –ü–æ—Ä–æ–≥–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è
  thresholds:
    val_loss_increase: 0.05      # –†–æ—Å—Ç validation loss
    train_val_gap: 2.0           # –†–∞–∑—Ä—ã–≤ –º–µ–∂–¥—É train –∏ val
    attention_degradation: 0.1   # –£—Ö—É–¥—à–µ–Ω–∏–µ attention
    gate_instability: 0.15       # –ù–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å gate
  
  # –î–µ–π—Å—Ç–≤–∏—è –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏
  actions:
    reduce_learning_rate: 0.5    # –°–Ω–∏–∂–µ–Ω–∏–µ LR
    increase_dropout: 0.02       # –£–≤–µ–ª–∏—á–µ–Ω–∏–µ dropout
    early_stop_patience: 100     # Patience –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∞

# üéØ –§–ê–ó–û–í–û–ï –û–ë–£–ß–ï–ù–ò–ï TTS (–∏–∑ Very Attentive Tacotron)
tts_phase_training:
  enabled: true
  
  phases:
    # –§–∞–∑–∞ 1: Pre-alignment (–ø–µ—Ä–≤—ã–µ —ç–ø–æ—Ö–∏)
    pre_alignment:
      epochs: 500
      focus: "attention_learning"
      guided_attention_weight: 10.0   # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ
      learning_rate_modifier: 1.0
      
    # –§–∞–∑–∞ 2: Alignment learning
    alignment_learning:
      epochs: 1500
      focus: "attention_stabilization"
      guided_attention_weight: 3.0
      learning_rate_modifier: 0.8
      
    # –§–∞–∑–∞ 3: Quality optimization
    quality_optimization:
      epochs: 1000
      focus: "quality_improvement"
      guided_attention_weight: 1.0
      learning_rate_modifier: 0.5
      
    # –§–∞–∑–∞ 4: Fine-tuning
    fine_tuning:
      epochs: 500
      focus: "final_polishing"
      guided_attention_weight: 0.5
      learning_rate_modifier: 0.3

# üöÄ –ü–†–û–î–í–ò–ù–£–¢–´–ï TTS –ú–ï–¢–†–ò–ö–ò (–∏–∑ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π 2025)
tts_metrics:
  enabled: true
  
  # –ú–µ—Ç—Ä–∏–∫–∏ attention –∫–∞—á–µ—Å—Ç–≤–∞
  attention_metrics:
    diagonality_score: true      # –î–∏–∞–≥–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å attention
    monotonicity_score: true     # –ú–æ–Ω–æ—Ç–æ–Ω–Ω–æ—Å—Ç—å
    focus_score: true            # –§–æ–∫—É—Å–∏—Ä–æ–≤–∫–∞
    entropy_score: true          # –≠–Ω—Ç—Ä–æ–ø–∏—è attention
  
  # –ú–µ—Ç—Ä–∏–∫–∏ gate –∫–∞—á–µ—Å—Ç–≤–∞  
  gate_metrics:
    accuracy: true               # –¢–æ—á–Ω–æ—Å—Ç—å gate
    precision: true              # Precision gate
    recall: true                 # Recall gate
    f1_score: true               # F1 gate
  
  # –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ mel
  mel_metrics:
    spectral_quality: true       # –°–ø–µ–∫—Ç—Ä–∞–ª—å–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ
    temporal_consistency: true   # –í—Ä–µ–º–µ–Ω–Ω–∞—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å
    harmonic_clarity: true       # –ì–∞—Ä–º–æ–Ω–∏—á–µ—Å–∫–∞—è —á–µ—Ç–∫–æ—Å—Ç—å

# üéµ –°–ü–ï–¶–ò–ê–õ–ò–ó–ò–†–û–í–ê–ù–ù–´–ï TTS LOSS FUNCTIONS (–∏–∑ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π)
tts_loss_functions:
  enabled: true
  
  # Spectral Loss –¥–ª—è –ª—É—á—à–µ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞
  spectral_loss:
    enabled: true
    weight: 0.3
    fft_sizes: [1024, 2048, 4096]
    
  # Perceptual Loss –¥–ª—è —á–µ–ª–æ–≤–µ—á–µ—Å–∫–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞
  perceptual_loss:
    enabled: true
    weight: 0.2
    
  # Style Loss –¥–ª—è —Å—Ç–∏–ª—è –≥–æ–ª–æ—Å–∞
  style_loss:
    enabled: true
    weight: 0.1

# üîß –°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
experiment_name: tacotron2_smart_v2
output_dir: output
checkpoint_path: data/checkpoint
dataset_path: data/dataset
hparams_path: hparams.py

# üîå –ü–æ—Ä—Ç—ã —Å–µ—Ä–≤–∏—Å–æ–≤
ports:
  mlflow: 5000
  tensorboard: 5001
  optimization_engine: 5002
  streamlit: 5003
  log_watcher: 5005
  metrics_store: 5006
  param_scheduler: 5007
  early_stop_controller: 5008
  alert_manager: 5009
  model_registry: 5010

# üìä MLflow –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
mlflow:
  tracking_uri: mlruns
  experiment_name: tacotron2_smart_optimization

# üèÜ –†–µ–µ—Å—Ç—Ä –º–æ–¥–µ–ª–µ–π
model_registry:
  path: smart_tuner/models
  best_model_name: best_tts_model.pt
  max_models: 3  # –£–º–µ–Ω—å—à–µ–Ω–æ —Å 5
  primary_metric: val_loss
  minimize_metric: true

# üéØ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
parameter_scheduling:
  learning_rate:
    enabled: true
    strategy: cosine
    start_value: 0.001
    end_value: 0.0001
    total_steps: 8000  # –£–º–µ–Ω—å—à–µ–Ω–æ —Å 10000

parameter_scheduling_config:
  update_frequency: 20  # –£–≤–µ–ª–∏—á–µ–Ω–æ —Å 10

# üéØ –§–∏–Ω–∞–ª—å–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ
final_training:
  epochs: 200

# üìù –û–±—É—á–µ–Ω–∏–µ
training:
  base_command: python train.py
  python_executable: python
  script_path: train.py
  continue_from_checkpoint: true
  full_training: true

# üîê –†–µ—Å—É—Ä—Å—ã
resources:
  checkpointing:
    path: output

# üì± Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
telegram:
  enabled: true
  bot_token: 2010534305:AAHqgXYT5RPcLoJe-wNdFaFbIJvJsN2xUHA
  chat_id: '536955174'
  parse_mode: Markdown
  disable_web_page_preview: true
  notifications:
    training_start: true
    training_complete: true
    training_restart: true        # üîÑ –ù–û–í–û–ï: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ö
    optimization_updates: true
    error_alerts: true
    early_stop: true
    metrics_summary: true
    quality_interventions: true   # ü§ñ –ù–û–í–û–ï: –£–º–Ω—ã–µ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞ —Å–∏—Å—Ç–µ–º—ã 