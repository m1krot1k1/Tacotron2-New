# üìä –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è TensorBoard –∏ MLflow

## üéØ –ü—Ä–æ–±–ª–µ–º–∞
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∂–∞–ª–æ–≤–∞–ª—Å—è –Ω–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤ –≤ MLflow –∏ TensorBoard - —Ç–æ–ª—å–∫–æ —Å–ø–∏—Å–æ–∫ –ª–æ–≥–æ–≤ –±–µ–∑ –º–µ—Ç—Ä–∏–∫.

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
1. **TensorBoard writer –∑–∞–∫—Ä—ã–≤–∞–ª—Å—è** –≤ –±–ª–æ–∫–µ `finally` –ø—Ä–∏ –ª—é–±–æ–º –∏—Å–∫–ª—é—á–µ–Ω–∏–∏
2. **–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–µ—Ç—Ä–∏–∫** –ª–æ–≥–∏—Ä–æ–≤–∞–ª–æ—Å—å –≤ TensorBoard –∏ MLflow
3. **–û—à–∏–±–∫–∏ –≤ –∫–æ–¥–µ** –ø—Ä–∏–≤–æ–¥–∏–ª–∏ –∫ –ø—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω–æ–º—É –∑–∞–∫—Ä—ã—Ç–∏—é –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ `parse_batch`
```python
# –ë–´–õ–û:
batch_data = (text_inputs, text_lengths, mel_targets, gate_targets, mel_lengths, ctc_text, ctc_text_lengths, guide_mask)
x, y = self.model.parse_batch(batch_data)

# –°–¢–ê–õ–û:
x, y = self.model.parse_batch(batch)
```

### 2. –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ TensorBoard
–î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç—Ä–∏–∫–∏:
- **–û—Å–Ω–æ–≤–Ω—ã–µ**: `train/loss`, `train/attention_diagonality`, `train/gate_accuracy`
- **Loss –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**: `train/mel_loss`, `train/gate_loss`, `train/guide_loss`, `train/emb_loss`
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**: `train/grad_norm`, `train/learning_rate`
- **–ì–∏–ø–µ—Ä–ø–∞—Ä–∞–º–µ—Ç—Ä—ã**: `train/guided_attention_weight`

### 3. –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ MLflow
–î–æ–±–∞–≤–ª–µ–Ω—ã —Ç–µ –∂–µ –º–µ—Ç—Ä–∏–∫–∏ —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `train.`:
- `train.loss`, `train.mel_loss`, `train.gate_loss`, `train.guide_loss`, `train.emb_loss`
- `train.attention_diagonality`, `train.gate_accuracy`, `train.grad_norm`
- `train.learning_rate`, `train.guided_attention_weight`

### 4. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ —ç–ø–æ—Ö–∏
–î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç—Ä–∏–∫–∏ —ç–ø–æ—Ö–∏:
- `epoch/train_loss`, `epoch/val_loss`, `epoch/quality_score`
- `epoch/quality_issues`, `epoch/time`, `epoch/phase`

### 5. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –∑–∞–∫—Ä—ã—Ç–∏—è TensorBoard
```python
# –ë–´–õ–û: TensorBoard –∑–∞–∫—Ä—ã–≤–∞–ª—Å—è –≤ –±–ª–æ–∫–µ finally –ø—Ä–∏ –ª—é–±–æ–º –∏—Å–∫–ª—é—á–µ–Ω–∏–∏
finally:
    self.tensorboard_writer.close()

# –°–¢–ê–õ–û: TensorBoard –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏
# (–±–ª–æ–∫ finally —É–±—Ä–∞–Ω)
```

## üìà –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### TensorBoard
- ‚úÖ **10 –º–µ—Ç—Ä–∏–∫** –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ –∫–∞–∂–¥—ã–π —à–∞–≥
- ‚úÖ **Event —Ñ–∞–π–ª—ã —Ä–∞—Å—Ç—É—Ç** (—Å 2.2K –¥–æ 26K+ –±–∞–π—Ç)
- ‚úÖ **Loss —Å–Ω–∏–∂–∞–µ—Ç—Å—è** (54.39 ‚Üí 37.66 ‚Üí 46.04)
- ‚úÖ **UI –¥–æ—Å—Ç—É–ø–µ–Ω** –Ω–∞ http://localhost:6006

### MLflow
- ‚úÖ **16 —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤** —Å–æ–∑–¥–∞–Ω–æ
- ‚úÖ **–ê–∫—Ç–∏–≤–Ω—ã–π run** —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º RUNNING
- ‚úÖ **10 –º–µ—Ç—Ä–∏–∫** –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ –∫–∞–∂–¥—ã–π —à–∞–≥
- ‚úÖ **UI –¥–æ—Å—Ç—É–ø–µ–Ω** –Ω–∞ http://localhost:5000

### –ú–µ—Ç—Ä–∏–∫–∏ –æ–±—É—á–µ–Ω–∏—è
```
üìä –¢–µ–∫—É—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏ (—à–∞–≥ 46):
‚Ä¢ train/loss: 46.0402
‚Ä¢ train/mel_loss: 33.7666
‚Ä¢ train/gate_loss: 0.7930
‚Ä¢ train/guide_loss: 5.2245
‚Ä¢ train/emb_loss: 6.2561
‚Ä¢ train/attention_diagonality: 0.0299
‚Ä¢ train/gate_accuracy: 0.5226
‚Ä¢ train/grad_norm: 20.4625
‚Ä¢ train/learning_rate: 0.0000
‚Ä¢ train/guided_attention_weight: 100.0000
```

## üöÄ –î–æ—Å—Ç—É–ø –∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º

### TensorBoard
```bash
# –ó–∞–ø—É—Å–∫
tensorboard --logdir=logs --port=6006 --host=0.0.0.0

# –î–æ—Å—Ç—É–ø
http://localhost:6006
```

### MLflow
```bash
# –ó–∞–ø—É—Å–∫
mlflow ui --port=5000 --host=0.0.0.0

# –î–æ—Å—Ç—É–ø
http://localhost:5000
```

## üîß –°–∫—Ä–∏–ø—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ TensorBoard
```bash
python check_tensorboard.py
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ MLflow
```bash
python check_mlflow.py
```

## üìù –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

‚úÖ **–ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é!**

- **TensorBoard**: 10 –º–µ—Ç—Ä–∏–∫, –∞–∫—Ç–∏–≤–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, UI –¥–æ—Å—Ç—É–ø–µ–Ω
- **MLflow**: 10 –º–µ—Ç—Ä–∏–∫, –∞–∫—Ç–∏–≤–Ω—ã–π run, UI –¥–æ—Å—Ç—É–ø–µ–Ω
- **–û–±—É—á–µ–Ω–∏–µ**: Loss —Å–Ω–∏–∂–∞–µ—Ç—Å—è, –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –ü–æ–ª–Ω–∞—è –≤–∏–¥–∏–º–æ—Å—Ç—å –ø—Ä–æ—Ü–µ—Å—Å–∞ –æ–±—É—á–µ–Ω–∏—è

–¢–µ–ø–µ—Ä—å —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å—Ç—å –ø–æ–ª–Ω–∞—è –∫–∞—Ä—Ç–∏–Ω–∞ –æ–±—É—á–µ–Ω–∏—è —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ –∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏ –≤ –æ–±–æ–∏—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö! 