# üéØ –ü–õ–ê–ù –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø ALIGNMENT –ü–†–û–ë–õ–ï–ú –í TACOTRON2

## üìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- **–®–∞–≥ –æ–±—É—á–µ–Ω–∏—è:** 500
- **–ö–∞—á–µ—Å—Ç–≤–æ alignment:** 29% (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –Ω–∏–∑–∫–æ–µ)
- **–û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:** –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è –ø–æ–ª–æ—Å–∞ –≤–º–µ—Å—Ç–æ –¥–∏–∞–≥–æ–Ω–∞–ª–∏

## üîß –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### 1. Guided Attention Loss
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞ –≤ `loss_function.py`
- ‚úÖ –ó–∞–º–µ–¥–ª–µ–Ω decay: `0.99999` ‚Üí `0.9999`
- ‚úÖ –°–Ω–∏–∂–µ–Ω –Ω–∞—á–∞–ª—å–Ω—ã–π scale: `40.0` ‚Üí `10.0`
- ‚úÖ –°–Ω–∏–∂–µ–Ω guide_lowbound: `1.0` ‚Üí `0.1`

### 2. –ì–∏–ø–µ—Ä–ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–±—É—á–µ–Ω–∏—è
- ‚úÖ –£–≤–µ–ª–∏—á–µ–Ω –≤–µ—Å guided loss: `0.5` ‚Üí `2.0`
- ‚úÖ –û—Ç–ª–æ–∂–µ–Ω —Å—Ç–∞—Ä—Ç decay: `3000` ‚Üí `10000` —à–∞–≥–æ–≤
- ‚úÖ –ó–∞–º–µ–¥–ª–µ–Ω decay: `30000` ‚Üí `100000` —à–∞–≥–æ–≤

### 3. Dropout –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- ‚úÖ –°–Ω–∏–∂–µ–Ω –æ–±—â–∏–π dropout: `0.3` ‚Üí `0.1`
- ‚úÖ –°–Ω–∏–∂–µ–Ω encoder dropout: `0.05` ‚Üí `0.02`
- ‚úÖ –°–Ω–∏–∂–µ–Ω postnet dropout: `0.1` ‚Üí `0.05`

### 4. Learning Rate
- ‚úÖ –í–æ–∑–≤—Ä–∞—â–µ–Ω –∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º—É: `1e-3` ‚Üí `5e-4`
- ‚úÖ –ë–æ–ª–µ–µ –º—è–≥–∫–∏–π decay: `0.5` ‚Üí `0.8`
- ‚úÖ –ë–æ–ª—å—à–µ —Ç–µ—Ä–ø–µ–Ω–∏—è: `2000` ‚Üí `5000` —à–∞–≥–æ–≤

## üöÄ –î–ê–õ–¨–ù–ï–ô–®–ò–ï –î–ï–ô–°–¢–í–ò–Ø

### 1. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –æ–±—É—á–µ–Ω–∏—è (–ö–†–ò–¢–ò–ß–ù–û)
```bash
# –£–¥–∞–ª–∏—Ç—å —Ç–µ–∫—É—â–∏–π checkpoint
rm -rf output/trial_0/checkpoint_*

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –æ–±—É—á–µ–Ω–∏–µ —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏
python train.py --output_directory=output --log_directory=logs
```

### 2. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞–∂–¥—ã–µ 200 —à–∞–≥–æ–≤
```bash
# –ó–∞–ø—É—Å–∫ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ alignment
python alignment_diagnostics.py --step=CURRENT_STEP
```

### 3. –û–∂–∏–¥–∞–µ–º–∞—è –¥–∏–Ω–∞–º–∏–∫–∞ —É–ª—É—á—à–µ–Ω–∏—è
- **–®–∞–≥–∏ 0-1000:** –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑–æ–≤–æ–≥–æ alignment
- **–®–∞–≥–∏ 1000-5000:** –ü–æ—è–≤–ª–µ–Ω–∏–µ –¥–∏–∞–≥–æ–Ω–∞–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- **–®–∞–≥–∏ 5000+:** –°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è –∏ —É–ª—É—á—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞

## üìà –ö–†–ò–¢–ï–†–ò–ò SUCCESS

### –î–∏–∞–≥–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –¥–æ–ª–∂–Ω–∞ —Ä–∞—Å—Ç–∏:
- **–®–∞–≥ 1000:** >10% (–º–∏–Ω–∏–º—É–º)
- **–®–∞–≥ 3000:** >30% (–ø—Ä–∏–µ–º–ª–µ–º–æ)
- **–®–∞–≥ 5000:** >50% (—Ö–æ—Ä–æ—à–æ)
- **–®–∞–≥ 10000:** >70% (–æ—Ç–ª–∏—á–Ω–æ)

### –ß—Ç–æ —Å–º–æ—Ç—Ä–µ—Ç—å –≤ –ª–æ–≥–∞—Ö:
```
attention_loss: –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å >0.1 –≤ –Ω–∞—á–∞–ª–µ
mel_loss: –¥–æ–ª–∂–Ω–∞ —Å–Ω–∏–∂–∞—Ç—å—Å—è –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ
gate_loss: –¥–æ–ª–∂–Ω–∞ —Å—Ç–∞–±–∏–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è <0.5
```

## üö® RED FLAGS - –∫–æ–≥–¥–∞ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ–±—É—á–µ–Ω–∏–µ

### –ï—Å–ª–∏ –ø–æ—Å–ª–µ 2000 —à–∞–≥–æ–≤:
- –î–∏–∞–≥–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å <5%
- Attention loss <0.01
- –í—Å–µ alignment –≤–µ—Å–∞ <0.1

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–∞–Ω–Ω—ã–µ:** —É–±–µ–¥–∏—Ç—å—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ text-audio –ø–∞—Ä
2. **–£–≤–µ–ª–∏—á–∏—Ç—å guided loss weight –¥–æ 5.0**
3. **–î–æ–±–∞–≤–∏—Ç—å curriculum learning**

## üíª –ö–û–ú–ê–ù–î–´ –î–õ–Ø –ú–û–ù–ò–¢–û–†–ò–ù–ì–ê

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è:
```bash
# –°–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ TensorBoard
tensorboard --logdir=runs

# –ê–Ω–∞–ª–∏–∑ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ checkpoint
python alignment_diagnostics.py --checkpoint=output/trial_0/checkpoint_LATEST
```

### –ë—ã—Å—Ç—Ä–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:
```bash
# –°–æ–∑–¥–∞—Ç—å alignment –≥—Ä–∞—Ñ–∏–∫
python -c "
from alignment_diagnostics import analyze_current_alignment
results = analyze_current_alignment(step=CURRENT_STEP)
print(f'–î–∏–∞–≥–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å: {results[\"diagnostics\"][\"diagonal_score\"]:.1%}')
"
```

## üéØ –ü–†–û–ì–ù–û–ó –í–†–ï–ú–ï–ù–ò

**–ü—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ:**
- –ü–µ—Ä–≤—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ –¥–∏–∞–≥–æ–Ω–∞–ª–∏: ~1000 —à–∞–≥–æ–≤ (2-3 —á–∞—Å–∞)
- –ü—Ä–∏–µ–º–ª–µ–º–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ alignment: ~5000 —à–∞–≥–æ–≤ (10-12 —á–∞—Å–æ–≤)
- –•–æ—Ä–æ—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ: ~10000 —à–∞–≥–æ–≤ (20-24 —á–∞—Å–∞)

**–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ 2000 —à–∞–≥–æ–≤ - –Ω—É–∂–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è!**

---

## üìû –ü–û–î–î–ï–†–ñ–ö–ê

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É: `python alignment_diagnostics.py`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏: `tail -f logs/train.log`
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–µ–∫—É—â–∏–µ alignment'—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

**–ú–æ–¥–µ–ª—å –¥–æ–ª–∂–Ω–∞ –Ω–∞—É—á–∏—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É alignment - —ç—Ç–æ –∫–ª—é—á –∫ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–º—É TTS!** 