# üìã –ê–ù–ê–õ–ò–ó HPARAMS.PY –ò –°–í–Ø–ó–ê–ù–ù–´–• –§–ê–ô–õ–û–í

**–î–∞—Ç–∞:** 23 –∏—é–Ω—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–°–ï –ü–†–û–ë–õ–ï–ú–´ –ò–°–ü–†–ê–í–õ–ï–ù–´**

---

## üîç –ü–†–û–í–ï–î–ï–ù–ù–´–ô –ê–ù–ê–õ–ò–ó:

### 1. **–§–∞–π–ª—ã –ø–æ–¥ –∞–Ω–∞–ª–∏–∑–æ–º:**
- `hparams.py` - –æ—Å–Ω–æ–≤–Ω—ã–µ –≥–∏–ø–µ—Ä–ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–¥–µ–ª–∏
- `smart_tuner/config.yaml` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Smart Tuner
- `smart_tuner/optimization_engine.py` - –¥–≤–∏–∂–æ–∫ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- `smart_tuner/trainer_wrapper.py` - –æ–±–µ—Ä—Ç–∫–∞ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è
- `tools.py` - –ø–∞—Ä—Å–µ—Ä –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

### 2. **–°–æ–∑–¥–∞–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:**
- `test_hparams_compatibility.py` - —Ç–µ—Å—Ç —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

---

## ‚ùå‚û°Ô∏è‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´:

### **1. –ù–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:**

**–ü—Ä–æ–±–ª–µ–º–∞:** Smart Tuner –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –Ω–∞–∑–≤–∞–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ –±—ã–ª–æ –≤ `hparams.py`

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
```yaml
# –ë–´–õ–û –≤ config.yaml:
attention_dropout: 0.1
prenet_dropout: 0.5  
postnet_dropout: 0.5

# –°–¢–ê–õ–û –≤ config.yaml:
p_attention_dropout: 0.1      # —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç hparams.py
dropout_rate: 0.3             # —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç hparams.py  
postnet_dropout_rate: 0.1     # —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç hparams.py
```

### **2. –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ hparams.py:**

**–ü—Ä–æ–±–ª–µ–º–∞:** Smart Tuner —Ç—Ä–µ–±–æ–≤–∞–ª `guided_attention_enabled` –∏ `guide_loss_weight`

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ hparams.py:**
```python
# –î–û–ë–ê–í–õ–ï–ù–û:
guided_attention_enabled=True,       # –í–∫–ª—é—á–µ–Ω–∏–µ guided attention
guide_loss_weight=1.0,              # –ü—Ä–æ—Å—Ç–æ–π –≤–µ—Å guided loss
```

### **3. –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**

**–ü—Ä–æ–±–ª–µ–º–∞:** `SyntaxError: keyword argument repeated: gate_threshold`

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** –£–¥–∞–ª–µ–Ω—ã –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

### **4. –°—Å—ã–ª–∫–∏ –Ω–∞ —Å—Ç–∞—Ä—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –≤ –∫–æ–¥–µ:**

**–ü—Ä–æ–±–ª–µ–º–∞:** `optimization_engine.py` —Å—Å—ã–ª–∞–ª—Å—è –Ω–∞ —Å—Ç–∞—Ä—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
```python
# –ë–´–õ–û:
dropout_params = ['attention_dropout', 'prenet_dropout', 'postnet_dropout']

# –°–¢–ê–õ–û:
dropout_params = ['p_attention_dropout', 'dropout_rate', 'postnet_dropout_rate']
```

---

## ‚úÖ –†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø:

### **–¢–µ—Å—Ç —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:**
```
üìã –ù–∞–π–¥–µ–Ω–æ 10 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:
   - batch_size              ‚úÖ
   - epochs                  ‚úÖ  
   - learning_rate           ‚úÖ
   - warmup_steps            ‚úÖ
   - guided_attention_enabled ‚úÖ
   - guide_loss_weight       ‚úÖ
   - p_attention_dropout     ‚úÖ
   - gate_threshold          ‚úÖ
   - dropout_rate            ‚úÖ
   - postnet_dropout_rate    ‚úÖ

üìä –†–ï–ó–£–õ–¨–¢–ê–¢–´:
   ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤: 10
   ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤: 0

üß™ –¢–ï–°–¢ –ü–ê–†–°–ò–ù–ì–ê –ü–ê–†–ê–ú–ï–¢–†–û–í: ‚úÖ –£–°–ü–ï–®–ù–û
üéâ –í–°–ï –ü–ê–†–ê–ú–ï–¢–†–´ –°–û–í–ú–ï–°–¢–ò–ú–´!
```

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—É—Å–∫–∞ —Å–∏—Å—Ç–µ–º—ã:**
```
‚úÖ hparams.py –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
‚úÖ TrainerWrapper –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫  
‚úÖ Smart Tuner V2 –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
```

---

## üìä –ü–û–õ–ù–´–ô –°–ü–ò–°–û–ö –ü–ê–†–ê–ú–ï–¢–†–û–í:

### **–î–æ—Å—Ç—É–ø–Ω–æ –≤ hparams.py (108 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤):**

**–û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–¥–µ–ª–∏:**
- `batch_size` = 48
- `learning_rate` = 0.001
- `epochs` = 500000
- `warmup_steps` = 2000

**TTS-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `guided_attention_enabled` = True
- `guide_loss_weight` = 1.0
- `p_attention_dropout` = 0.1
- `gate_threshold` = 0.5
- `dropout_rate` = 0.3
- `postnet_dropout_rate` = 0.1

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã attention:**
- `attention_dim` = 128
- `attention_rnn_dim` = 1024
- `attention_location_n_filters` = 32
- `attention_location_kernel_size` = 31

**–ò –º–Ω–æ–∂–µ—Å—Ç–≤–æ –¥—Ä—É–≥–∏—Ö...**

### **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Smart Tuner (10 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤):**
- ‚úÖ –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω—ã —Å hparams.py
- ‚úÖ –í—Å–µ —Ç–∏–ø—ã –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã
- ‚úÖ –í—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–∞–ª–∏–¥–Ω—ã

---

## üîß –°–û–ó–î–ê–ù–ù–´–ï –ò–ù–°–¢–†–£–ú–ï–ù–¢–´:

### **`test_hparams_compatibility.py`**
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
python test_hparams_compatibility.py

# –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã  
python test_hparams_compatibility.py --show-params
```

**–§—É–Ω–∫—Ü–∏–∏:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ config.yaml –ø—Ä–æ—Ç–∏–≤ hparams.py
- ‚úÖ –¢–µ—Å—Ç–∏—Ä—É–µ—Ç –ø–∞—Ä—Å–∏–Ω–≥ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç
- ‚úÖ –ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Ä–µ—à–µ–Ω–∏—è –¥–ª—è –ø—Ä–æ–±–ª–µ–º

---

## üéØ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï:

### ‚úÖ **–í–°–ï –ü–†–û–ë–õ–ï–ú–´ –†–ï–®–ï–ù–´:**

1. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:** 100%
2. **–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:** –î–æ–±–∞–≤–ª–µ–Ω—ã
3. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:** –£–¥–∞–ª–µ–Ω—ã  
4. **–°—Å—ã–ª–∫–∏ –≤ –∫–æ–¥–µ:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
5. **–ü–∞—Ä—Å–∏–Ω–≥ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:** –†–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### üöÄ **–°–ò–°–¢–ï–ú–ê –ì–û–¢–û–í–ê –ö –†–ê–ë–û–¢–ï:**

- ‚úÖ **Smart Tuner V2** –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≤–º–µ—Å—Ç–∏–º —Å **hparams.py**
- ‚úÖ **–í—Å–µ 10 –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ–º—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤** –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã** –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—Ç —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- ‚úÖ **–°–∏—Å—Ç–µ–º–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è** –±–µ–∑ –æ—à–∏–±–æ–∫

### üìà **–†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:**

1. **–†–µ–≥—É–ª—è—Ä–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å** `test_hparams_compatibility.py` –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
2. **–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤** –≤ Smart Tuner –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∏—Ö –Ω–∞–ª–∏—á–∏–µ –≤ hparams.py
3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ—Ç–µ—Å—Ç** –∫–∞–∫ —á–∞—Å—Ç—å CI/CD –ø—Ä–æ—Ü–µ—Å—Å–∞

---

**üéâ –†–ï–ó–£–õ–¨–¢–ê–¢: –ü–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã!** 